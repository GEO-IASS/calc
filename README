Compile with:

	mvn compile
   
Run unit tests with:

	mvn package

Run integration tests with:

	mvn verify
    

In order to create the database (using PostgreSQL 9.2 or greater) run from command line:

	psql -U postgres -f calc-core/src/main/resources/org/openforis/calc/db/init.sql


Add dev database settings to calc-core/src/main/resources/dev.properties.

Regenerate jOOQ stub classes*: 

	cd calc-core
	mvn properties:read-project-properties jooq-codegen:generate

* Requires dev database settings in dev.properties.


IMPORTANT: When making updates to the database schema, ALWAYS ADD A Liquibase 
           MIGRATION TO calc-core/design/db/changelog.  These will be automatically run
           when building during Maven's "process-resources" phase.           
           See http://www.liquibase.org/quickstart.html for more details.   
  
 
- Install R:
Mac Os X:
	Download (http://cran.r-project.org/bin/macosx/) and install r
	
	If using OS X Mountain Lion install X11  (http://support.apple.com/kb/HT5293?viewlocale=en_US&locale=en_US)

	sudo R
		install.packages("RPostgreSQL")
	 	install.packages("rJava")
	
	set R_HOME environment variable
		1. add to the file /etc/launchd.con (sudo vi /etc/launchd.conf):
			setenv R_HOME /Library/Frameworks/R.framework/Resources
		2. reboot computer
		
UBUNTU:
	Follow the istructions on http://cran.rstudio.com/
	
	add repository to sources list: 
		sudo gedit /etc/apt/sources.list
			add a new entry:
			deb http://cran.rstudio.com/bin/linux/ubuntu precise/
	
	
	gpg --keyserver pgp.mit.edu --recv-key 51716619E084DAB9
	gpg -a --export E084DAB9 | apt-key add -
	
	sudo apt-get update
	sudo apt-get install r-base
	

	Set enviroment variable  (e.g. sudo gedit /etc/environment)
		R_HOME=/usr/lib/R
	
	
- Install R required packages:
		
		sudo apt-get install libpq-dev

		tar -xvf calc/lib/lmfor_1.1_R_i686-pc-linux-gnu.tar.gz 
		sudo R CMD INSTALL --build lmfor
		rm -r lmfor
		
		sudo R
			install.packages("RPostgreSQL")
	
	
- Install rJava
	 	install.packages("rJava")

		If having problem (like : libjvm.so: cannot open shared object file: No such file or directory):
			- check with ll command the permission of libjvm file
			
			- modify /etc/environment file and add:
				LD_LIBRARY_PATH=$JAVA_HOME/jre/lib/i386:$JAVA_HOME/jre/lib/i386/client
			(log out and login again)
			
			- run javareconf
				sudo R CMD javareconf
			
